<h2>Resource Requests</h2>
<form method="POST" action="{{ url_for('approve_all_requests') }}">
<table>
<tr>
  <th>Camp</th>
  <th>Item</th>
  <th>Requested</th>
  <th>Priority</th>
  <th>Suggested Allocation</th>
  <th>Approve Qty</th>
</tr>

{% for r in requests %}
<tr>
  <td>{{ r.camp_name }}</td>
  <td>{{ r.item_type }}</td>
  <td>{{ r.quantity_needed - r.fulfilled_quantity }}</td>
  <td>{{ r.priority }}</td>

  <td>{{ r.suggested_qty }}</td>

  <td>
    <input type="number"
           name="alloc_{{ r.request_id }}"
           value="{{ r.suggested_qty }}"
           min="0">
  </td>
</tr>
{% endfor %}
</table>

<button type="submit"> Approve All</button>
</form>


<table>
<tr>
    <th>Camp</th>
    <th>Item</th>
    <th>Requested</th>
    <th>Fulfilled</th>
    <th>Priority</th>
    <th>Status</th>
    <th>Actions</th>
</tr>

{% for r in requests %}
<tr>
    <td>{{ r[1] }}</td>
    <td>{{ r[2] }}</td>
    <td>{{ r[3] }}</td>
    <td>{{ r[4] }}</td>
    <td>{{ r[5] }}</td>
    <td>{{ r[6] }}</td>
    <td>

        <!-- APPROVE -->
        <form method="POST" action="{{ url_for('auto_approve_request') }}" style="display:inline;">
            <input type="hidden" name="request_id" value="{{ r[0] }}">
            <button type="submit">Approve</button>
        </form>

        <!-- DISCARD -->
        <form method="POST" action="{{ url_for('discard_request') }}" style="display:inline;">
            <input type="hidden" name="request_id" value="{{ r[0] }}">
            <input type="text" name="admin_note" placeholder="Reason" required>
            <button type="submit">Discard</button>
        </form>

    </td>
</tr>
{% endfor %}
</table>
