<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Resource Requests</h2>
<form method="POST" action="{{ url_for('approve_all_requests') }}">
<div>

    <h2>Resource Requests</h2>

<form method="POST" action="{{ url_for('approve_all_requests') }}">
  <button type="submit"> Approve All</button>
</form>

<table border="1">
<tr>
  <th>Camp</th>
  <th>Item</th>
  <th>Requested</th>
  <th>Priority</th>
  <th>Approve Qty</th>
  <th>Actions</th>
</tr>

{% for r in requests %}
<tr>
  <td>{{ r.camp_name }}</td>
  <td>{{ r.item_type }}</td>
  <td>{{ r.quantity_needed - r.fulfilled_quantity }}</td>
  <td>{{ r.priority }}</td>

  <td>
    <form method="POST" action="{{ url_for('auto_approve_request') }}">
      <input type="hidden" name="request_id" value="{{ r.request_id }}">
      <input type="number" name="allocated_quantity" min="0">
      <button type="submit">Approve</button>
    </form>
  </td>

  <td>
    <form method="POST" action="{{ url_for('discard_request') }}">
      <input type="hidden" name="request_id" value="{{ r.request_id }}">
      <input type="text" name="admin_note" placeholder="Reason" required>
      <button type="submit">Discard</button>
    </form>
  </td>

</tr>
{% endfor %}
</table>


</div>

</body>
</html>